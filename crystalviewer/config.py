"""
Configuration settings for Rendering
"""

from typing import Dict, Any, Tuple
import numpy as np

# Rendering quality presets
QUALITY_PRESETS = {
    "low": {
        "sphere_resolution": 8,
        "bond_resolution": 4,
        "cell_resolution": 2,
        "max_atoms": 1000,
        "antialiasing": 0,
    },
    "medium": {
        "sphere_resolution": 12,
        "bond_resolution": 6,
        "cell_resolution": 4,
        "max_atoms": 5000,
        "antialiasing": 2,
    },
    "high": {
        "sphere_resolution": 16,
        "bond_resolution": 8,
        "cell_resolution": 6,
        "max_atoms": 10000,
        "antialiasing": 4,
    },
    "ultra": {
        "sphere_resolution": 24,
        "bond_resolution": 12,
        "cell_resolution": 8,
        "max_atoms": 50000,
        "antialiasing": 8,
    },
}

# Default atomic radii (Angstroms)
ATOMIC_RADII = {
    "H": 0.31,
    "He": 0.28,
    "Li": 1.28,
    "Be": 0.96,
    "B": 0.84,
    "C": 0.76,
    "N": 0.71,
    "O": 0.66,
    "F": 0.57,
    "Ne": 0.58,
    "Na": 1.66,
    "Mg": 1.41,
    "Al": 1.21,
    "Si": 1.11,
    "P": 1.07,
    "S": 1.05,
    "Cl": 1.02,
    "Ar": 1.06,
    "K": 2.03,
    "Ca": 1.76,
    "Sc": 1.70,
    "Ti": 1.60,
    "V": 1.53,
    "Cr": 1.39,
    "Mn": 1.39,
    "Fe": 1.32,
    "Co": 1.26,
    "Ni": 1.24,
    "Cu": 1.32,
    "Zn": 1.22,
    "Ga": 1.22,
    "Ge": 1.20,
    "As": 1.19,
    "Se": 1.20,
    "Br": 1.20,
    "Kr": 1.16,
    "Rb": 2.20,
    "Sr": 1.95,
    "Y": 1.90,
    "Zr": 1.75,
    "Nb": 1.64,
    "Mo": 1.54,
    "Tc": 1.47,
    "Ru": 1.46,
    "Rh": 1.42,
    "Pd": 1.39,
    "Ag": 1.45,
    "Cd": 1.44,
    "In": 1.42,
    "Sn": 1.39,
    "Sb": 1.39,
    "Te": 1.38,
    "I": 1.39,
    "Xe": 1.40,
    "Cs": 2.44,
    "Ba": 2.15,
    "La": 2.07,
    "Ce": 2.04,
    "Pr": 2.03,
    "Nd": 2.01,
    "Pm": 1.99,
    "Sm": 1.98,
    "Eu": 1.98,
    "Gd": 1.96,
    "Tb": 1.94,
    "Dy": 1.92,
    "Ho": 1.91,
    "Er": 1.89,
    "Tm": 1.90,
    "Yb": 1.87,
    "Lu": 1.87,
    "Hf": 1.75,
    "Ta": 1.70,
    "W": 1.62,
    "Re": 1.51,
    "Os": 1.44,
    "Ir": 1.41,
    "Pt": 1.36,
    "Au": 1.36,
    "Hg": 1.32,
    "Tl": 1.45,
    "Pb": 1.46,
    "Bi": 1.48,
    "Po": 1.40,
    "At": 1.50,
    "Rn": 1.50,
    "Fr": 2.60,
    "Ra": 2.21,
    "Ac": 2.15,
    "Th": 2.06,
    "Pa": 2.00,
    "U": 1.96,
    "Np": 1.90,
    "Pu": 1.87,
    "Am": 1.80,
    "Cm": 1.69,
    "XX": 0.8,  # Default for unknown elements
}

# Color schemes
COLOR_SCHEMES = {
    "default": {
        "H": [1.0, 1.0, 1.0],
        "He": [0.85, 1.0, 1.0],
        "Li": [0.8, 0.5, 1.0],
        "Be": [0.76, 1.0, 0.0],
        "B": [1.0, 0.71, 0.71],
        "C": [0.56, 0.56, 0.56],
        "N": [0.19, 0.31, 0.97],
        "O": [1.0, 0.05, 0.05],
        "F": [0.56, 0.88, 0.31],
        "Ne": [0.7, 0.89, 0.96],
        "Na": [0.67, 0.36, 0.95],
        "Mg": [0.54, 1.0, 0.0],
        "Al": [0.75, 0.65, 0.65],
        "Si": [0.94, 0.78, 0.63],
        "P": [1.0, 0.5, 0.0],
        "S": [1.0, 1.0, 0.19],
        "Cl": [0.12, 0.94, 0.12],
        "Ar": [0.5, 0.82, 0.89],
        "K": [0.56, 0.25, 0.83],
        "Ca": [0.24, 1.0, 0.0],
        "Sc": [0.9, 0.9, 0.9],
        "Ti": [0.75, 0.76, 0.78],
        "V": [0.65, 0.65, 0.67],
        "Cr": [0.54, 0.6, 0.78],
        "Mn": [0.61, 0.48, 0.78],
        "Fe": [0.88, 0.4, 0.2],
        "Co": [0.94, 0.56, 0.63],
        "Ni": [0.31, 0.82, 0.31],
        "Cu": [0.78, 0.5, 0.2],
        "Zn": [0.49, 0.5, 0.69],
        "Ga": [0.76, 0.56, 0.56],
        "Ge": [0.4, 0.56, 0.56],
        "As": [0.74, 0.5, 0.89],
        "Se": [1.0, 0.63, 0.0],
        "Br": [0.65, 0.16, 0.16],
        "Kr": [0.36, 0.72, 0.82],
        "Rb": [0.44, 0.18, 0.69],
        "Sr": [0.0, 1.0, 0.0],
        "Y": [0.58, 1.0, 1.0],
        "Zr": [0.58, 0.88, 0.88],
        "Nb": [0.45, 0.76, 0.79],
        "Mo": [0.33, 0.71, 0.71],
        "Tc": [0.23, 0.62, 0.62],
        "Ru": [0.14, 0.56, 0.56],
        "Rh": [0.04, 0.49, 0.55],
        "Pd": [0.0, 0.41, 0.52],
        "Ag": [0.75, 0.75, 0.75],
        "Cd": [1.0, 0.85, 0.56],
        "In": [0.65, 0.46, 0.45],
        "Sn": [0.4, 0.5, 0.5],
        "Sb": [0.62, 0.39, 0.71],
        "Te": [0.83, 0.48, 0.0],
        "I": [0.58, 0.0, 0.58],
        "Xe": [0.26, 0.62, 0.69],
        "Cs": [0.34, 0.09, 0.56],
        "Ba": [0.0, 0.79, 0.0],
        "La": [0.44, 0.83, 1.0],
        "Ce": [1.0, 1.0, 0.78],
        "Pr": [0.85, 1.0, 0.78],
        "Nd": [0.78, 1.0, 0.78],
        "Pm": [0.64, 1.0, 0.78],
        "Sm": [0.56, 1.0, 0.78],
        "Eu": [0.38, 1.0, 0.78],
        "Gd": [0.27, 1.0, 0.78],
        "Tb": [0.19, 1.0, 0.78],
        "Dy": [0.12, 1.0, 0.78],
        "Ho": [0.0, 1.0, 0.61],
        "Er": [0.0, 0.9, 0.46],
        "Tm": [0.0, 0.83, 0.32],
        "Yb": [0.0, 0.75, 0.22],
        "Lu": [0.0, 0.67, 0.14],
        "Hf": [0.3, 0.76, 1.0],
        "Ta": [0.3, 0.65, 1.0],
        "W": [0.13, 0.58, 0.84],
        "Re": [0.15, 0.49, 0.67],
        "Os": [0.15, 0.4, 0.59],
        "Ir": [0.09, 0.49, 0.53],
        "Pt": [0.82, 0.82, 0.88],
        "Au": [1.0, 0.82, 0.14],
        "Hg": [0.72, 0.72, 0.82],
        "Tl": [0.65, 0.33, 0.3],
        "Pb": [0.34, 0.34, 0.38],
        "Bi": [0.62, 0.31, 0.71],
        "Po": [0.67, 0.36, 0.0],
        "At": [0.46, 0.31, 0.27],
        "Rn": [0.26, 0.51, 0.59],
        "Fr": [0.26, 0.0, 0.4],
        "Ra": [0.0, 0.49, 0.0],
        "Ac": [0.44, 0.67, 0.98],
        "Th": [0.0, 0.73, 1.0],
        "Pa": [0.0, 0.63, 1.0],
        "U": [0.0, 0.56, 1.0],
        "Np": [0.0, 0.5, 1.0],
        "Pu": [0.0, 0.42, 1.0],
        "Am": [0.33, 0.36, 0.95],
        "Cm": [0.47, 0.36, 0.89],
        "Bk": [0.54, 0.31, 0.89],
        "Cf": [0.63, 0.21, 0.83],
        "Es": [0.7, 0.12, 0.83],
        "Fm": [0.7, 0.12, 0.73],
        "Md": [0.7, 0.05, 0.65],
        "No": [0.74, 0.05, 0.53],
        "Lr": [0.78, 0.0, 0.4],
        "XX": [0.5, 0.5, 0.5],
    },  # vesta
    "vesta": {
        "H": [1.0, 1.0, 1.0],
        "He": [0.85, 1.0, 1.0],
        "Li": [0.8, 0.5, 1.0],
        "Be": [0.76, 1.0, 0.0],
        "B": [1.0, 0.71, 0.71],
        "C": [0.56, 0.56, 0.56],
        "N": [0.19, 0.31, 0.97],
        "O": [1.0, 0.05, 0.05],
        "F": [0.56, 0.88, 0.31],
        "Ne": [0.7, 0.89, 0.96],
        "Na": [0.67, 0.36, 0.95],
        "Mg": [0.54, 1.0, 0.0],
        "Al": [0.75, 0.65, 0.65],
        "Si": [0.94, 0.78, 0.63],
        "P": [1.0, 0.5, 0.0],
        "S": [1.0, 1.0, 0.19],
        "Cl": [0.12, 0.94, 0.12],
        "Ar": [0.5, 0.82, 0.89],
        "K": [0.56, 0.25, 0.83],
        "Ca": [0.24, 1.0, 0.0],
        "Sc": [0.9, 0.9, 0.9],
        "Ti": [0.75, 0.76, 0.78],
        "V": [0.65, 0.65, 0.67],
        "Cr": [0.54, 0.6, 0.78],
        "Mn": [0.61, 0.48, 0.78],
        "Fe": [0.88, 0.4, 0.2],
        "Co": [0.94, 0.56, 0.63],
        "Ni": [0.31, 0.82, 0.31],
        "Cu": [0.78, 0.5, 0.2],
        "Zn": [0.49, 0.5, 0.69],
        "Ga": [0.76, 0.56, 0.56],
        "Ge": [0.4, 0.56, 0.56],
        "As": [0.74, 0.5, 0.89],
        "Se": [1.0, 0.63, 0.0],
        "Br": [0.65, 0.16, 0.16],
        "Kr": [0.36, 0.72, 0.82],
        "Rb": [0.44, 0.18, 0.69],
        "Sr": [0.0, 1.0, 0.0],
        "Y": [0.58, 1.0, 1.0],
        "Zr": [0.58, 0.88, 0.88],
        "Nb": [0.45, 0.76, 0.79],
        "Mo": [0.33, 0.71, 0.71],
        "Tc": [0.23, 0.62, 0.62],
        "Ru": [0.14, 0.56, 0.56],
        "Rh": [0.04, 0.49, 0.55],
        "Pd": [0.0, 0.41, 0.52],
        "Ag": [0.75, 0.75, 0.75],
        "Cd": [1.0, 0.85, 0.56],
        "In": [0.65, 0.46, 0.45],
        "Sn": [0.4, 0.5, 0.5],
        "Sb": [0.62, 0.39, 0.71],
        "Te": [0.83, 0.48, 0.0],
        "I": [0.58, 0.0, 0.58],
        "Xe": [0.26, 0.62, 0.69],
        "Cs": [0.34, 0.09, 0.56],
        "Ba": [0.0, 0.79, 0.0],
        "La": [0.44, 0.83, 1.0],
        "Ce": [1.0, 1.0, 0.78],
        "Pr": [0.85, 1.0, 0.78],
        "Nd": [0.78, 1.0, 0.78],
        "Pm": [0.64, 1.0, 0.78],
        "Sm": [0.56, 1.0, 0.78],
        "Eu": [0.38, 1.0, 0.78],
        "Gd": [0.27, 1.0, 0.78],
        "Tb": [0.19, 1.0, 0.78],
        "Dy": [0.12, 1.0, 0.78],
        "Ho": [0.0, 1.0, 0.61],
        "Er": [0.0, 0.9, 0.46],
        "Tm": [0.0, 0.83, 0.32],
        "Yb": [0.0, 0.75, 0.22],
        "Lu": [0.0, 0.67, 0.14],
        "Hf": [0.3, 0.76, 1.0],
        "Ta": [0.3, 0.65, 1.0],
        "W": [0.13, 0.58, 0.84],
        "Re": [0.15, 0.49, 0.67],
        "Os": [0.15, 0.4, 0.59],
        "Ir": [0.09, 0.49, 0.53],
        "Pt": [0.82, 0.82, 0.88],
        "Au": [1.0, 0.82, 0.14],
        "Hg": [0.72, 0.72, 0.82],
        "Tl": [0.65, 0.33, 0.3],
        "Pb": [0.34, 0.34, 0.38],
        "Bi": [0.62, 0.31, 0.71],
        "Po": [0.67, 0.36, 0.0],
        "At": [0.46, 0.31, 0.27],
        "Rn": [0.26, 0.51, 0.59],
        "Fr": [0.26, 0.0, 0.4],
        "Ra": [0.0, 0.49, 0.0],
        "Ac": [0.44, 0.67, 0.98],
        "Th": [0.0, 0.73, 1.0],
        "Pa": [0.0, 0.63, 1.0],
        "U": [0.0, 0.56, 1.0],
        "Np": [0.0, 0.5, 1.0],
        "Pu": [0.0, 0.42, 1.0],
        "Am": [0.33, 0.36, 0.95],
        "Cm": [0.47, 0.36, 0.89],
        "Bk": [0.54, 0.31, 0.89],
        "Cf": [0.63, 0.21, 0.83],
        "Es": [0.7, 0.12, 0.83],
        "Fm": [0.7, 0.12, 0.73],
        "Md": [0.7, 0.05, 0.65],
        "No": [0.74, 0.05, 0.53],
        "Lr": [0.78, 0.0, 0.4],
        "XX": [0.5, 0.5, 0.5],
    },
    "jmol": {
        "H": [1.0, 1.0, 1.0],
        "He": [0.85, 1.0, 1.0],
        "Li": [0.8, 0.5, 1.0],
        "Be": [0.76, 1.0, 0.0],
        "B": [1.0, 0.71, 0.71],
        "C": [0.56, 0.56, 0.56],
        "N": [0.19, 0.31, 0.97],
        "O": [1.0, 0.05, 0.05],
        "F": [0.56, 0.88, 0.31],
        "Ne": [0.7, 0.89, 0.96],
        "Na": [0.67, 0.36, 0.95],
        "Mg": [0.54, 1.0, 0.0],
        "Al": [0.75, 0.65, 0.65],
        "Si": [0.94, 0.78, 0.63],
        "P": [1.0, 0.5, 0.0],
        "S": [1.0, 1.0, 0.19],
        "Cl": [0.12, 0.94, 0.12],
        "Ar": [0.5, 0.82, 0.89],
        "K": [0.56, 0.25, 0.83],
        "Ca": [0.24, 1.0, 0.0],
        "Fe": [0.88, 0.4, 0.2],
        "Cu": [0.78, 0.5, 0.2],
        "Zn": [0.49, 0.5, 0.69],
        "Ag": [0.75, 0.75, 0.75],
        "Au": [1.0, 0.82, 0.14],
        "XX": [1.0, 0.08, 0.58],
    },
    "cpk": {
        "H": [1.0, 1.0, 1.0],
        "C": [0.0, 0.0, 0.0],
        "N": [0.56, 0.56, 1.0],
        "O": [1.0, 0.0, 0.0],
        "F": [0.0, 1.0, 0.0],
        "P": [1.0, 0.65, 0.0],
        "S": [1.0, 1.0, 0.0],
        "Cl": [0.0, 1.0, 0.0],
        "Fe": [1.0, 0.65, 0.0],
        "XX": [1.0, 0.08, 0.58],
    },
}

# Default rendering settings
DEFAULT_RENDER_SETTINGS = {
    "background_color": [0.95, 0.95, 0.95],  # Light gray
    "lighting": "three lights",
    "shadows": False,
    "ambient": 0.3,
    "diffuse": 0.7,
    "specular": 0.2,
    "specular_power": 100,
    "opacity": 1.0,
    "interpolation": "phong",
}

# Camera presets for different crystal views
CAMERA_PRESETS = {
    "isometric": {
        "position": [1, 1, 1],
        "focal_point": [0, 0, 0],
        "view_up": [0, 0, 1],
    },
    "top": {"position": [0, 0, 2], "focal_point": [0, 0, 0], "view_up": [0, 1, 0]},
    "side": {"position": [2, 0, 0], "focal_point": [0, 0, 0], "view_up": [0, 0, 1]},
    "front": {"position": [0, -2, 0], "focal_point": [0, 0, 0], "view_up": [0, 0, 1]},
}

# Performance optimization settings
PERFORMANCE_SETTINGS = {
    "use_gpu": True,
    "max_memory_mb": 1024,
    "batch_size": 1000,
    "parallel_processing": True,
    "cache_meshes": True,
    "simplify_meshes": True,
    "mesh_simplification_factor": 0.8,
}


def get_quality_settings(quality: str = "medium") -> Dict[str, Any]:
    """Get rendering settings for specified quality level"""
    return QUALITY_PRESETS.get(quality, QUALITY_PRESETS["medium"])


def get_atomic_radius(element: str, scale: float = 1.0) -> float:
    """Get atomic radius for element with scaling"""
    return ATOMIC_RADII.get(element, ATOMIC_RADII["XX"]) * scale


def get_element_color(
    element: str, scheme: str = "vesta"
) -> Tuple[float, float, float]:
    """Get RGB color for element"""
    colors = COLOR_SCHEMES.get(scheme, COLOR_SCHEMES["vesta"])
    return tuple(colors.get(element, colors["XX"]))


def get_camera_preset(preset: str) -> Dict[str, Any]:
    """Get camera settings for preset"""
    return CAMERA_PRESETS.get(preset, CAMERA_PRESETS["isometric"])
